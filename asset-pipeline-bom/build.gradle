plugins {
    id 'java-platform'
}

group = 'cloud.wondrify'

javaPlatform {
    allowDependencies()
}

dependencies {
    constraints {
        for (Project subproject : rootProject.subprojects) {
            if (subproject.path == project.path || !(subproject.name in rootProject.ext.publishedProjects)) {
                continue // ignore self
            }

            if (subproject.name == 'asset-pipeline-gradle') {
                continue // gradle dependencies are separate from build dependencies so do not include them in the bom
            }

            api project(":${subproject.path}")
        }
    }
}

apply {
    from rootProject.layout.projectDirectory.file('gradle/publish-config.gradle')
}